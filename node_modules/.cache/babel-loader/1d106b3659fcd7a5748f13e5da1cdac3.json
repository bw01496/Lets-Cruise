{"ast":null,"code":"var _jsxFileName = \"/Users/jinzo/Desktop/projects/outdoorsthings/src/components/Products.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Link, Routes, useNavigate } from \"react-router-dom\";\nimport { createOrder, getCartByUser, getProductById, updateQuantity } from \"../api\";\n\nconst Products = ({\n  products,\n  setProducts,\n  user,\n  token,\n  setMyProducts,\n  myProducts\n}) => {\n  console.log('myprducts', myProducts);\n  console.log(\">>> products js component\", products);\n  console.log('from product', token);\n  const [quantity, setQuantity] = useState(0);\n  const [itemOrder, setItemOrder] = useState(0);\n  const [updatingItem, setUpdatingItem] = useState(false);\n  console.log('>>>>quantity', quantity);\n  const navigate = useNavigate();\n\n  const allProducts = async () => {\n    try {\n      const response = await fetch(`http://localhost:3000/api/products`);\n      const data = await response.json();\n      setProducts(data);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  useEffect(() => {\n    allProducts();\n  }, []);\n\n  const addProductToOrder = async productId => {\n    let cart = await getCartByUser(user.id, productId, token);\n    setMyProducts(cart);\n    console.log('from add to products myproducts', productId);\n    myProducts.map(item => {\n      console.log('item', item.id);\n      console.log('>>>>productId', productId);\n\n      if (item.id == productId) {\n        console.log('setting quantity and item order');\n        setQuantity(5);\n        setItemOrder(item.orderid);\n        setUpdatingItem(true);\n        console.log('calling update quantity', quantity);\n      }\n    });\n\n    if (updatingItem) {\n      await updateQuantity(itemOrder, quantity, token);\n    }\n\n    if (user.id && updatingItem === false) {\n      console.log('creating order');\n      const order = await createOrder({\n        userId: user.id,\n        completePurchase: false,\n        productId: productId,\n        quantity: 1,\n        token\n      });\n      console.log(\"From addProdcct\", order);\n      const cart = await getCartByUser(user.id, productId, token);\n      console.log('>>>>???/', cart);\n      setMyProducts(cart);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, \"Products\"), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"all-products-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, products.map(product => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"single-product-card\",\n    key: product.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  }, product.title), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }, '$', product.price), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }, product.description), /*#__PURE__*/React.createElement(\"img\", {\n    src: product.imgurl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    value: product.id,\n    onClick: event => navigate(`${event.target.value}`),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, \"View\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    value: product.id,\n    onClick: event => addProductToOrder(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }, \"Add to Cart\")))));\n};\n\nexport default Products;","map":{"version":3,"sources":["/Users/jinzo/Desktop/projects/outdoorsthings/src/components/Products.js"],"names":["React","useEffect","useState","Link","Routes","useNavigate","createOrder","getCartByUser","getProductById","updateQuantity","Products","products","setProducts","user","token","setMyProducts","myProducts","console","log","quantity","setQuantity","itemOrder","setItemOrder","updatingItem","setUpdatingItem","navigate","allProducts","response","fetch","data","json","error","addProductToOrder","productId","cart","id","map","item","orderid","order","userId","completePurchase","product","title","price","description","imgurl","event","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport { Link, Routes, useNavigate } from \"react-router-dom\";\n\nimport { createOrder, getCartByUser, getProductById, updateQuantity } from \"../api\";\n\n\n\nconst Products = ({ products, setProducts, user, token, setMyProducts, myProducts }) => {\n  console.log('myprducts', myProducts)\n  console.log(\">>> products js component\", products);\n  console.log('from product', token)\n  const [quantity, setQuantity] = useState(0)\n  const [itemOrder, setItemOrder] = useState(0)\n  const [updatingItem, setUpdatingItem] = useState(false)\nconsole.log('>>>>quantity',quantity)\n\n\n  const navigate = useNavigate();\n\n  const allProducts = async () => {\n    try {\n      const response = await fetch(`http://localhost:3000/api/products`);\n      const data = await response.json();\n      setProducts(data);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  useEffect(() => {\n    allProducts();\n  }, []);\n\n  const addProductToOrder = async (productId) => {\n    let cart = await getCartByUser(user.id, productId, token)\n    setMyProducts(cart)\n   console.log('from add to products myproducts', productId)\n    myProducts.map((item) => {\n      console.log('item',item.id)\n      console.log('>>>>productId',productId)\n      if(item.id == productId){\n        console.log('setting quantity and item order')\n        setQuantity(5)\n        setItemOrder(item.orderid)\n        setUpdatingItem(true)\n        console.log('calling update quantity', quantity)\n        \n      }\n    })\n    if(updatingItem){\n    await updateQuantity(itemOrder, quantity, token)\n    }\n\n    if(user.id && updatingItem === false){\n      console.log('creating order')\n      const order = await createOrder({\n        userId: user.id,\n        completePurchase: false,\n        productId: productId,\n        quantity: 1,\n        token,\n      });\n\n      console.log(\"From addProdcct\", order);\n      const cart = await getCartByUser(user.id, productId, token);\n      console.log('>>>>???/',cart)\n      setMyProducts(cart);\n    }\n  };\n\n  return (\n    <>\n      <h2>Products</h2>\n      <div id='all-products-container'>\n      {products.map((product) => (\n        <div className=\"single-product-card\" key={product.id}>\n          <h1>{product.title}</h1>\n          <h3>{'$'}{product.price}</h3>\n          <p>{product.description}</p>\n          <img src={product.imgurl}></img>\n          <button\n            value={product.id}\n            onClick={(event) => navigate(`${event.target.value}`)}\n          >\n            View\n          </button>\n          <br></br>\n          <button\n            value={product.id}\n            onClick={(event) => addProductToOrder(event.target.value)}\n          >\n            Add to Cart\n          </button>\n        </div>\n      ))}\n      </div>\n    </>\n  );\n};\n\nexport default Products;\n"]},"metadata":{},"sourceType":"module"}