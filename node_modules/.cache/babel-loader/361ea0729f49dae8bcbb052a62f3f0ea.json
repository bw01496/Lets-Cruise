{"ast":null,"code":"var _jsxFileName = \"/Users/jinzo/Desktop/projects/outdoorsthings/src/components/Login.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useParams } from \"react-router\";\nimport { callApi } from \"./utils\";\nimport { getCartByUser } from \"../api\";\nconst APIURL = `http://localhost:3000/api`;\nconst REACT_APP_API_URL = process.env;\n\nconst Login = ({\n  user,\n  token,\n  userId,\n  setUserId,\n  setLoggedin,\n  loggedIn,\n  setToken,\n  setUser,\n  setIsAdmin,\n  setCartItems\n}) => {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [passwordConfirm, setPasswordConfirm] = useState(\"\");\n  const [firstName, setFirstName] = useState(\"\");\n  const [lastName, setLastName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [isMatched, setIsMatched] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  const params = useParams();\n  console.log('message>>>>>', message);\n  let navigate = useNavigate();\n\n  function logIn(resp) {\n    if (resp) {\n      setUserId(resp.user.id);\n      setIsAdmin(resp.user.isAdmin);\n      setToken(resp.token);\n      localStorage.setItem(\"token\", resp.token);\n\n      if (resp.token == \"\") {\n        setLoggedin(false);\n      } else {\n        setLoggedin(true);\n        navigate(\"/products\");\n      }\n    }\n  }\n\n  async function loginRoutine() {\n    try {\n      const resp = await fetch(`${APIURL}/users/${params.method}`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          firstName,\n          lastName,\n          email,\n          username,\n          password\n        })\n      });\n      console.log('data.user', resp);\n      const data = await resp.json();\n      setUser(data.user);\n      logIn(data);\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  if (loggedIn === false) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }\n    }, \"Login\"), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"title\",\n      onSubmit: async event => {\n        event.preventDefault();\n\n        if (params.method !== \"register\") {\n          loginRoutine();\n        } else if (password === passwordConfirm) {\n          setIsMatched(false);\n          loginRoutine();\n        } else {\n          setIsMatched(true);\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    }, params.method === \"login\" ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"username\",\n      value: username,\n      onChange: event => setUsername(event.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 24\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      placeholder: \"password\",\n      value: password,\n      onChange: event => setPassword(event.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      disabled: password.length < 8,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }\n    }, \"Submit\")), /*#__PURE__*/React.createElement(Link, {\n      to: \"/api/users/register\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 29\n      }\n    }, \"Register\")), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 78\n      }\n    }, message)) : null), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"\",\n      onSubmit: async event => {\n        event.preventDefault();\n\n        if (params.method !== \"register\") {\n          loginRoutine();\n        } else if (password === passwordConfirm) {\n          setIsMatched(false);\n          loginRoutine();\n        } else {\n          setIsMatched(true);\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }\n    }, params.method === \"register\" ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"first name\",\n      value: firstName,\n      onChange: event => setFirstName(event.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 22\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"last name\",\n      value: lastName,\n      onChange: event => setLastName(event.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 31\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 22\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"E-mail\",\n      value: email,\n      onChange: event => setEmail(event.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 31\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 22\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"username\",\n      value: username,\n      onChange: event => setUsername(event.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 31\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 22\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      placeholder: \"password\",\n      value: password,\n      onChange: event => setPassword(event.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 31\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      placeholder: \"password\",\n      value: passwordConfirm,\n      onChange: event => setPasswordConfirm(event.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 22\n      }\n    })), password.length < 8 ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 36\n      }\n    }, \"Your password must be at least 8 characters long\") : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 98\n      }\n    }, \"Your password is more than 8 characters!\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      disabled: password.length < 8,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }\n    }, \"Submit\")) : null)));\n  } else {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }\n    }, \"Welcome \", user.firstName));\n  }\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/jinzo/Desktop/projects/outdoorsthings/src/components/Login.js"],"names":["React","useState","useEffect","Link","useNavigate","useParams","callApi","getCartByUser","APIURL","REACT_APP_API_URL","process","env","Login","user","token","userId","setUserId","setLoggedin","loggedIn","setToken","setUser","setIsAdmin","setCartItems","username","setUsername","password","setPassword","passwordConfirm","setPasswordConfirm","firstName","setFirstName","lastName","setLastName","email","setEmail","isMatched","setIsMatched","message","setMessage","params","console","log","navigate","logIn","resp","id","isAdmin","localStorage","setItem","loginRoutine","fetch","method","headers","body","JSON","stringify","data","json","error","event","preventDefault","target","value","length"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,IAAT,EAAeC,WAAf,QAAkC,kBAAlC;AACA,SAASC,SAAT,QAA0B,cAA1B;AACA,SAASC,OAAT,QAAwB,SAAxB;AACA,SAASC,aAAT,QAA8B,QAA9B;AACA,MAAMC,MAAM,GAAI,2BAAhB;AACA,MAAMC,iBAAiB,GAAGC,OAAO,CAACC,GAAlC;;AAEA,MAAMC,KAAK,GAAG,CAAC;AACbC,EAAAA,IADa;AAEbC,EAAAA,KAFa;AAGbC,EAAAA,MAHa;AAIbC,EAAAA,SAJa;AAKbC,EAAAA,WALa;AAMbC,EAAAA,QANa;AAObC,EAAAA,QAPa;AAQbC,EAAAA,OARa;AASbC,EAAAA,UATa;AAUbC,EAAAA;AAVa,CAAD,KAWR;AACJ,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BvB,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACwB,QAAD,EAAWC,WAAX,IAA0BzB,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAAC0B,eAAD,EAAkBC,kBAAlB,IAAwC3B,QAAQ,CAAC,EAAD,CAAtD;AACA,QAAM,CAAC4B,SAAD,EAAYC,YAAZ,IAA4B7B,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAAC8B,QAAD,EAAWC,WAAX,IAA0B/B,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACgC,KAAD,EAAQC,QAAR,IAAoBjC,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACkC,SAAD,EAAYC,YAAZ,IAA4BnC,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAACoC,OAAD,EAAUC,UAAV,IAAwBrC,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAMsC,MAAM,GAAGlC,SAAS,EAAxB;AACFmC,EAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA2BJ,OAA3B;AACE,MAAIK,QAAQ,GAAGtC,WAAW,EAA1B;;AAEA,WAASuC,KAAT,CAAeC,IAAf,EAAqB;AAInB,QAAIA,IAAJ,EAAU;AACR5B,MAAAA,SAAS,CAAC4B,IAAI,CAAC/B,IAAL,CAAUgC,EAAX,CAAT;AACAxB,MAAAA,UAAU,CAACuB,IAAI,CAAC/B,IAAL,CAAUiC,OAAX,CAAV;AACA3B,MAAAA,QAAQ,CAACyB,IAAI,CAAC9B,KAAN,CAAR;AACAiC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BJ,IAAI,CAAC9B,KAAnC;;AACA,UAAI8B,IAAI,CAAC9B,KAAL,IAAc,EAAlB,EAAsB;AACpBG,QAAAA,WAAW,CAAC,KAAD,CAAX;AACD,OAFD,MAEO;AACLA,QAAAA,WAAW,CAAC,IAAD,CAAX;AACAyB,QAAAA,QAAQ,CAAC,WAAD,CAAR;AACD;AACF;AACF;;AAED,iBAAeO,YAAf,GAA8B;AAC5B,QAAI;AACF,YAAML,IAAI,GAAG,MAAMM,KAAK,CAAE,GAAE1C,MAAO,UAAS+B,MAAM,CAACY,MAAO,EAAlC,EAAqC;AAC3DA,QAAAA,MAAM,EAAE,MADmD;AAE3DC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT,SAFkD;AAK3DC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnB1B,UAAAA,SADmB;AAEnBE,UAAAA,QAFmB;AAGnBE,UAAAA,KAHmB;AAInBV,UAAAA,QAJmB;AAKnBE,UAAAA;AALmB,SAAf;AALqD,OAArC,CAAxB;AAcAe,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBG,IAAzB;AACA,YAAMY,IAAI,GAAG,MAAMZ,IAAI,CAACa,IAAL,EAAnB;AAEArC,MAAAA,OAAO,CAACoC,IAAI,CAAC3C,IAAN,CAAP;AACA8B,MAAAA,KAAK,CAACa,IAAD,CAAL;AACD,KApBD,CAoBE,OAAOE,KAAP,EAAc;AACdlB,MAAAA,OAAO,CAACkB,KAAR,CAAcA,KAAd;AACD;AACF;;AAED,MAAIxC,QAAQ,KAAK,KAAjB,EAAwB;AACtB,wBAEE,uDAEA;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ,eAEE;AACA,MAAA,SAAS,EAAC,OADV;AAEA,MAAA,QAAQ,EAAE,MAAOyC,KAAP,IAAiB;AACzBA,QAAAA,KAAK,CAACC,cAAN;;AACA,YAAIrB,MAAM,CAACY,MAAP,KAAkB,UAAtB,EAAkC;AAChCF,UAAAA,YAAY;AACb,SAFD,MAEO,IAAIxB,QAAQ,KAAKE,eAAjB,EAAkC;AACvCS,UAAAA,YAAY,CAAC,KAAD,CAAZ;AACAa,UAAAA,YAAY;AACb,SAHM,MAGA;AACLb,UAAAA,YAAY,CAAC,IAAD,CAAZ;AACD;AACF,OAZD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAcCG,MAAM,CAACY,MAAP,KAAkB,OAAlB,gBACC,uDAAE,uDAAE,uDAAE,uDAAE;AACF,MAAA,IAAI,EAAC,MADH;AAEF,MAAA,WAAW,EAAC,UAFV;AAGF,MAAA,KAAK,EAAE5B,QAHL;AAIF,MAAA,QAAQ,EAAGoC,KAAD,IAAWnC,WAAW,CAACmC,KAAK,CAACE,MAAN,CAAaC,KAAd,CAJ9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAF,eAKO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALP,eAKgB;AAChB,MAAA,IAAI,EAAC,UADW;AAEhB,MAAA,WAAW,EAAC,UAFI;AAGhB,MAAA,KAAK,EAAErC,QAHS;AAIhB,MAAA,QAAQ,EAAGkC,KAAD,IAAWjC,WAAW,CAACiC,KAAK,CAACE,MAAN,CAAaC,KAAd,CAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALhB,CAAF,eAWE;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,QAAQ,EAAErC,QAAQ,CAACsC,MAAT,GAAkB,CAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAXF,CAAF,eAagB,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,qBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAbhB,CAAF,eAamE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAM1B,OAAN,CAbnE,CADD,GAeG,IA7BJ,CAFF,eAkCI;AACE,MAAA,SAAS,EAAC,EADZ;AAEE,MAAA,QAAQ,EAAE,MAAOsB,KAAP,IAAiB;AACzBA,QAAAA,KAAK,CAACC,cAAN;;AACA,YAAIrB,MAAM,CAACY,MAAP,KAAkB,UAAtB,EAAkC;AAChCF,UAAAA,YAAY;AACb,SAFD,MAEO,IAAIxB,QAAQ,KAAKE,eAAjB,EAAkC;AACvCS,UAAAA,YAAY,CAAC,KAAD,CAAZ;AACAa,UAAAA,YAAY;AACb,SAHM,MAGA;AACLb,UAAAA,YAAY,CAAC,IAAD,CAAZ;AACD;AACF,OAZH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAcGG,MAAM,CAACY,MAAP,KAAkB,UAAlB,gBACC,uDAAE,uDAAE;AACJ,MAAA,IAAI,EAAC,MADD;AAEJ,MAAA,WAAW,EAAC,YAFR;AAGJ,MAAA,KAAK,EAAEtB,SAHH;AAIJ,MAAA,QAAQ,EAAG8B,KAAD,IAAW7B,YAAY,CAAC6B,KAAK,CAACE,MAAN,CAAaC,KAAd,CAJ7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAF,eAKK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALL,eAKc;AAChB,MAAA,IAAI,EAAC,MADW;AAEhB,MAAA,WAAW,EAAC,WAFI;AAGhB,MAAA,KAAK,EAAE/B,QAHS;AAIhB,MAAA,QAAQ,EAAG4B,KAAD,IAAW3B,WAAW,CAAC2B,KAAK,CAACE,MAAN,CAAaC,KAAd,CAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALd,eAUK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVL,eAUc;AAChB,MAAA,IAAI,EAAC,MADW;AAEhB,MAAA,WAAW,EAAC,QAFI;AAGhB,MAAA,KAAK,EAAE7B,KAHS;AAIhB,MAAA,QAAQ,EAAG0B,KAAD,IAAWzB,QAAQ,CAACyB,KAAK,CAACE,MAAN,CAAaC,KAAd,CAJb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVd,eAeK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAfL,eAec;AAChB,MAAA,IAAI,EAAC,MADW;AAEhB,MAAA,WAAW,EAAC,UAFI;AAGhB,MAAA,KAAK,EAAEvC,QAHS;AAIhB,MAAA,QAAQ,EAAGoC,KAAD,IAAWnC,WAAW,CAACmC,KAAK,CAACE,MAAN,CAAaC,KAAd,CAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAfd,eAoBK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MApBL,eAoBc;AAChB,MAAA,IAAI,EAAC,UADW;AAEhB,MAAA,WAAW,EAAC,UAFI;AAGhB,MAAA,KAAK,EAAErC,QAHS;AAIhB,MAAA,QAAQ,EAAGkC,KAAD,IAAWjC,WAAW,CAACiC,KAAK,CAACE,MAAN,CAAaC,KAAd,CAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MApBd,eAyBK;AACP,MAAA,IAAI,EAAC,UADE;AAEP,MAAA,WAAW,EAAC,UAFL;AAGP,MAAA,KAAK,EAAEnC,eAHA;AAIP,MAAA,QAAQ,EAAGgC,KAAD,IAAW/B,kBAAkB,CAAC+B,KAAK,CAACE,MAAN,CAAaC,KAAd,CAJhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAzBL,CAAF,EAgCDrC,QAAQ,CAACsC,MAAT,GAAkB,CAAlB,gBAAsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0DAAtB,gBAAoF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDAhCnF,eAiCF;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,QAAQ,EAAEtC,QAAQ,CAACsC,MAAT,GAAkB,CAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAjCE,CADD,GAqCK,IAnDR,CAlCJ,CAFA,CAFF;AAiGD,GAlGD,MAkGO;AACL,wBACE,uDACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAalD,IAAI,CAACgB,SAAlB,CADF,CADF;AAKD;AACF,CA7KD;;AA+KA,eAAejB,KAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useParams } from \"react-router\";\nimport { callApi } from \"./utils\";\nimport { getCartByUser } from \"../api\";\nconst APIURL = `http://localhost:3000/api`;\nconst REACT_APP_API_URL = process.env;\n\nconst Login = ({\n  user,\n  token,\n  userId,\n  setUserId,\n  setLoggedin,\n  loggedIn,\n  setToken,\n  setUser,\n  setIsAdmin,\n  setCartItems,\n}) => {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [passwordConfirm, setPasswordConfirm] = useState(\"\");\n  const [firstName, setFirstName] = useState(\"\");\n  const [lastName, setLastName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [isMatched, setIsMatched] = useState(false);\n  const [message, setMessage] = useState(\"\")\n  const params = useParams();\nconsole.log('message>>>>>',message)\n  let navigate = useNavigate();\n\n  function logIn(resp) {\n\n   \n    \n    if (resp) {\n      setUserId(resp.user.id);\n      setIsAdmin(resp.user.isAdmin)\n      setToken(resp.token);\n      localStorage.setItem(\"token\", resp.token);\n      if (resp.token == \"\") {\n        setLoggedin(false);\n      } else {\n        setLoggedin(true);\n        navigate(\"/products\");\n      }\n    }\n  }\n\n  async function loginRoutine() {\n    try {\n      const resp = await fetch(`${APIURL}/users/${params.method}`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          firstName,\n          lastName,\n          email,\n          username,\n          password,\n        }),\n      });\n\n      console.log('data.user', resp)\n      const data = await resp.json();\n      \n      setUser(data.user);\n      logIn(data);\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  if (loggedIn === false) {\n    return (\n      \n      <>\n      \n      <div className=\"login\">\n          <label>Login</label>\n        <form\n        className=\"title\"\n        onSubmit={async (event) => {\n          event.preventDefault();\n          if (params.method !== \"register\") {\n            loginRoutine();\n          } else if (password === passwordConfirm) {\n            setIsMatched(false);\n            loginRoutine();\n          } else {\n            setIsMatched(true);\n          }\n        } }\n      >\n        {params.method === \"login\" ? (\n          <><><><><input\n                type=\"text\"\n                placeholder=\"username\"\n                value={username}\n                onChange={(event) => setUsername(event.target.value)}\n              ></input><br></br><input\n                type=\"password\"\n                placeholder=\"password\"\n                value={password}\n                onChange={(event) => setPassword(event.target.value)}\n              ></input></>\n                <button type=\"submit\" disabled={password.length < 8}>\n                  Submit\n                </button></><Link to=\"/api/users/register\">Register</Link></><div>{message}</div></>\n        ) : null}\n      </form>\n     \n          <form\n            className=\"\"\n            onSubmit={async (event) => {\n              event.preventDefault();\n              if (params.method !== \"register\") {\n                loginRoutine();\n              } else if (password === passwordConfirm) {\n                setIsMatched(false);\n                loginRoutine();\n              } else {\n                setIsMatched(true);\n              }\n            } }\n          >\n            {params.method === \"register\" ? (\n              <><><input\n              type=\"text\"\n              placeholder=\"first name\"\n              value={firstName}\n              onChange={(event) => setFirstName(event.target.value)}\n            ></input><br></br><input\n              type=\"text\"\n              placeholder=\"last name\"\n              value={lastName}\n              onChange={(event) => setLastName(event.target.value)}\n            ></input><br></br><input\n              type=\"text\"\n              placeholder=\"E-mail\"\n              value={email}\n              onChange={(event) => setEmail(event.target.value)}\n            ></input><br></br><input\n              type=\"text\"\n              placeholder=\"username\"\n              value={username}\n              onChange={(event) => setUsername(event.target.value)}\n            ></input><br></br><input\n              type=\"password\"\n              placeholder=\"password\"\n              value={password}\n              onChange={(event) => setPassword(event.target.value)}\n            ></input><input\n              type=\"password\"\n              placeholder=\"password\"\n              value={passwordConfirm}\n              onChange={(event) => setPasswordConfirm(event.target.value)}\n            ></input></>\n            \n            {password.length < 8 ? <div>Your password must be at least 8 characters long</div> : <div>Your password is more than 8 characters!</div>}\n            <button type=\"submit\" disabled={password.length < 8}>\n                Submit\n              </button></>\n              ) : null}\n\n          </form>\n          </div>\n        </>\n    \n      \n    );\n  } else {\n    return (\n      <>\n        <h1>Welcome {user.firstName}</h1>\n      </>\n    );\n  }\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}