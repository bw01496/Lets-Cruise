{"ast":null,"code":"import React from \"react\";\nconst {\n  REACT_APP_API_URL = `http://localhost:3000/api`\n} = process.env;\nexport const callApi = async ({\n  url,\n  method,\n  body\n}) => {\n  console.log(\"from callApi>>\", {\n    url,\n    method,\n    body\n  });\n  const token = localStorage.getItem('token');\n  console.log('fromAPI', token);\n\n  try {\n    const options = {\n      method: method ? method.toUpperCase() : \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(body)\n    };\n\n    if (token) {\n      options.headers[\"Authorization\"] = `Bearer ${token}`;\n    }\n\n    const respObject = await fetch(`${REACT_APP_API_URL}${url}`, options);\n    const data = await respObject.json();\n\n    if (data.error) {\n      throw data.error;\n    }\n\n    console.log('from callapi Data', data);\n    return data;\n  } catch (error) {\n    console.error(error);\n  }\n};","map":{"version":3,"sources":["/Users/jinzo/Desktop/projects/outdoorsthings/src/components/utils/index.js"],"names":["React","REACT_APP_API_URL","process","env","callApi","url","method","body","console","log","token","localStorage","getItem","options","toUpperCase","headers","JSON","stringify","respObject","fetch","data","json","error"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,MAAM;AAAEC,EAAAA,iBAAiB,GAAI;AAAvB,IAAsDC,OAAO,CAACC,GAApE;AAEA,OAAO,MAAMC,OAAO,GAAG,OAAO;AAAEC,EAAAA,GAAF;AAAOC,EAAAA,MAAP;AAAeC,EAAAA;AAAf,CAAP,KAAiC;AACtDC,EAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8B;AAAEJ,IAAAA,GAAF;AAAOC,IAAAA,MAAP;AAAeC,IAAAA;AAAf,GAA9B;AAEA,QAAMG,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACAJ,EAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBC,KAAvB;;AACA,MAAI;AACF,UAAMG,OAAO,GAAG;AACdP,MAAAA,MAAM,EAAEA,MAAM,GAAGA,MAAM,CAACQ,WAAP,EAAH,GAA0B,KAD1B;AAEdC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAFK;AAKdR,MAAAA,IAAI,EAAES,IAAI,CAACC,SAAL,CAAeV,IAAf;AALQ,KAAhB;;AAOA,QAAIG,KAAJ,EAAW;AACTG,MAAAA,OAAO,CAACE,OAAR,CAAgB,eAAhB,IAAoC,UAASL,KAAM,EAAnD;AACD;;AACD,UAAMQ,UAAU,GAAG,MAAMC,KAAK,CAAE,GAAElB,iBAAkB,GAAEI,GAAI,EAA5B,EAA+BQ,OAA/B,CAA9B;AACA,UAAMO,IAAI,GAAG,MAAMF,UAAU,CAACG,IAAX,EAAnB;;AACA,QAAID,IAAI,CAACE,KAAT,EAAgB;AACd,YAAMF,IAAI,CAACE,KAAX;AACD;;AACDd,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCW,IAAjC;AACA,WAAOA,IAAP;AACD,GAlBD,CAkBE,OAAOE,KAAP,EAAc;AACdd,IAAAA,OAAO,CAACc,KAAR,CAAcA,KAAd;AACD;AACF,CA1BM","sourcesContent":["import React from \"react\";\nconst { REACT_APP_API_URL = `http://localhost:3000/api` } = process.env;\n\nexport const callApi = async ({ url, method, body }) => {\n  console.log(\"from callApi>>\", { url, method, body });\n\n  const token = localStorage.getItem('token');\n  console.log('fromAPI', token)\n  try {\n    const options = {\n      method: method ? method.toUpperCase() : \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(body),\n    };\n    if (token) {\n      options.headers[\"Authorization\"] = `Bearer ${token}`;\n    }\n    const respObject = await fetch(`${REACT_APP_API_URL}${url}`, options);\n    const data = await respObject.json();\n    if (data.error) {\n      throw data.error;\n    }\n    console.log('from callapi Data', data)\n    return data;\n  } catch (error) {\n    console.error(error);\n  }\n};\n"]},"metadata":{},"sourceType":"module"}