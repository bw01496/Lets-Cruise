{"ast":null,"code":"var _jsxFileName = \"/Users/jinzo/Desktop/projects/outdoorsthings/src/components/myCart.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Link, Routes, useNavigate } from \"react-router-dom\";\nimport { destroyCart, getCartByUser, getAllCheckoutByUserId, submitCheckout, orderDelete, updateQuantity } from \"../api\";\n\nconst MyCart = ({\n  userId,\n  token,\n  setMyProducts,\n  myProducts,\n  user,\n  cart\n}) => {\n  let totalPrice = 0;\n  const [firstName, setFirstName] = useState(\"\");\n  const [lastName, setLastName] = useState(\"\");\n  const [street, setStreet] = useState(\"\");\n  const [city, setCity] = useState(\"\");\n  const [state, setState] = useState(\"\");\n  const [zip, setZip] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [creditCardNumber, setCreditCardNumber] = useState(\"\");\n  const [creditCardExp, setCreditCardExp] = useState(\"\");\n  const [creditValidationNumber, setCreditValidationNumber] = useState(\"\");\n  const [quantity, setQuantity] = useState(0);\n  const [success, setSuccess] = useState(false);\n  const [open, setOpen] = useState(false);\n  const [total, setTotal] = useState(0);\n\n  const getTotal = async () => {\n    if (user) {\n      const myProducts = await getCartByUser(user.id, token);\n      setMyProducts(myProducts);\n    }\n\n    console.log('from getTotal>>>>', myProducts);\n\n    if (myProducts) {\n      myProducts.map(element => {\n        console.log('from get total>>>>', Number(element.price));\n        totalPrice = Number(totalPrice) + Number(element.price) * element.orderQuantity;\n        setTotal(totalPrice);\n      });\n      totalPrice = 0;\n    }\n  };\n\n  const getMyProducts = async () => {\n    try {\n      // const response = await fetch(\n      //   `http://localhost:3000/api/orders/cart/${userId}`\n      // );\n      // const data = await response.json();\n      const myProducts = await getCartByUser(user.id, token);\n      setMyProducts(myProducts);\n      console.log('>>>>>', myProducts);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  useEffect(() => {\n    getMyProducts();\n    getTotal();\n  }, []);\n\n  const handleUpdate = async orderId => {\n    console.log(\"changing quantity\", orderId);\n    await updateQuantity(orderId, quantity, token);\n    const myProducts = await getCartByUser(user.id, token);\n    setMyProducts(myProducts);\n    getTotal();\n  };\n\n  const deleteCart = async () => {\n    if (userId) {\n      await destroyCart(userId, token);\n      const usersCart = await getCartByUser(userId, token);\n      setMyProducts(usersCart);\n    }\n\n    setTotal(0);\n  };\n\n  const submitOrder = async event => {\n    event.preventDefault();\n\n    if (user.id) {\n      const checkout = await submitCheckout({\n        userId: user.id,\n        firstName,\n        lastName,\n        street,\n        city,\n        state,\n        zip,\n        phone,\n        creditCardNumber,\n        creditCardExp,\n        creditValidationNumber,\n        orders: cart\n      }, token);\n    }\n\n    const usersCart = await getCartByUser(user.id, token);\n    setMyProducts(usersCart);\n    deleteCart();\n    setSuccess(true);\n    setFirstName(\"\");\n    setLastName(\"\");\n    setStreet(\"\");\n    setCity(\"\");\n    setState(\"\");\n    setZip(\"\");\n    setPhone(\"\");\n    setCreditValidationNumber(\"\");\n    setCreditCardExp(\"\");\n    setCreditCardNumber(\"\");\n  };\n\n  function removeItem(orderId) {\n    myProducts.map(item => {\n      if (orderId == item.orderId) {\n        totalPrice = totalPrice - item.price;\n      }\n\n      setTotal(totalPrice);\n      let newMyProducts = myProducts.filter(item => item.orderId != orderId);\n      setMyProducts(newMyProducts);\n      getMyProducts();\n      getTotal();\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, user ? /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 15\n    }\n  }, \"Welcome to your cart \", user.firstName) : /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 64\n    }\n  }, \"Your cart is empty\"), myProducts ? myProducts.map(item => /*#__PURE__*/React.createElement(\"div\", {\n    id: \"all-products-container\",\n    key: item.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }, item.title, \"$\", item.price * item.orderQuantity, /*#__PURE__*/React.createElement(\"button\", {\n    value: item.orderId,\n    onClick: event => handleUpdate(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 15\n    }\n  }, \"Update\"), /*#__PURE__*/React.createElement(\"select\", {\n    onChange: event => setQuantity(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 17\n    }\n  }, \"1\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 17\n    }\n  }, \"2\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 17\n    }\n  }, \"3\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 17\n    }\n  }, \"4\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }, \"5\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 17\n    }\n  }, \"6\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: 7,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 17\n    }\n  }, \"7\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 17\n    }\n  }, \"8\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: 9,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 17\n    }\n  }, \"9\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 17\n    }\n  }, \"10\")), /*#__PURE__*/React.createElement(\"button\", {\n    value: item.orderId,\n    onClick: event => {\n      event.preventDefault();\n      removeItem(event.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 15\n    }\n  }, \"Remove selected item\")))) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 9\n    }\n  }, \"Cart is Empty\"), /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }\n  }, \"Total Cost: \", \"$\", total), /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }\n  }, \"Edit Cart\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => deleteCart(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }\n  }, \"Delete Cart\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: submitOrder,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    id: \"checkoutInstruction\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 9\n    }\n  }, \"Please Enter Your Shipping and Payment Information!\"), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"creditCardSection\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"input\",\n    type: \"text\",\n    placeholder: \"First\",\n    required: true,\n    value: firstName,\n    onChange: event => setFirstName(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"input\",\n    type: \"text\",\n    placeholder: \"Last\",\n    required: true,\n    value: lastName,\n    onChange: event => setLastName(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"creditCardSection\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"input\",\n    type: \"text\",\n    placeholder: \"Street\",\n    required: true,\n    value: street,\n    onChange: event => setStreet(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"input\",\n    type: \"text\",\n    placeholder: \"City\",\n    required: true,\n    value: city,\n    onChange: event => setCity(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"input\",\n    type: \"text\",\n    placeholder: \"State\",\n    required: true,\n    value: state,\n    onChange: event => setState(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"input\",\n    type: \"text\",\n    placeholder: \"Zip\",\n    required: true,\n    value: zip,\n    onChange: event => setZip(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"input\",\n    type: \"text\",\n    placeholder: \"Phone\",\n    required: true,\n    value: phone,\n    onChange: event => setPhone(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"creditCardSection\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"input\",\n    type: \"text\",\n    placeholder: \"CC Number\",\n    required: true,\n    value: creditCardNumber,\n    onChange: event => setCreditCardNumber(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"input\",\n    type: \"text\",\n    placeholder: \"Expiration\",\n    required: true,\n    value: creditCardExp,\n    onChange: event => setCreditCardExp(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"input\",\n    type: \"text\",\n    placeholder: \"CVV# on Back\",\n    required: true,\n    value: creditValidationNumber,\n    onChange: event => setCreditValidationNumber(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 11\n    }\n  })), success ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 11\n    }\n  }, \"Thank You for your purchase! Youre purchase is complete.\") : null, /*#__PURE__*/React.createElement(\"button\", {\n    id: \"paymentSubmit\",\n    type: \"submit\",\n    variant: \"contained\",\n    className: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 9\n    }\n  }, \"Submit Order\")));\n};\n\nexport default MyCart;","map":{"version":3,"sources":["/Users/jinzo/Desktop/projects/outdoorsthings/src/components/myCart.js"],"names":["React","useEffect","useState","Link","Routes","useNavigate","destroyCart","getCartByUser","getAllCheckoutByUserId","submitCheckout","orderDelete","updateQuantity","MyCart","userId","token","setMyProducts","myProducts","user","cart","totalPrice","firstName","setFirstName","lastName","setLastName","street","setStreet","city","setCity","state","setState","zip","setZip","phone","setPhone","creditCardNumber","setCreditCardNumber","creditCardExp","setCreditCardExp","creditValidationNumber","setCreditValidationNumber","quantity","setQuantity","success","setSuccess","open","setOpen","total","setTotal","getTotal","id","console","log","map","element","Number","price","orderQuantity","getMyProducts","error","handleUpdate","orderId","deleteCart","usersCart","submitOrder","event","preventDefault","checkout","orders","removeItem","item","newMyProducts","filter","title","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport { Link, Routes, useNavigate } from \"react-router-dom\";\nimport {\n  destroyCart,\n  getCartByUser,\n  getAllCheckoutByUserId,\n  submitCheckout,\n  orderDelete,\n  updateQuantity,\n} from \"../api\";\n\nconst MyCart = ({ userId, token, setMyProducts, myProducts, user, cart }) => {\n  let totalPrice = 0;\n\n  const [firstName, setFirstName] = useState(\"\");\n  const [lastName, setLastName] = useState(\"\");\n  const [street, setStreet] = useState(\"\");\n  const [city, setCity] = useState(\"\");\n  const [state, setState] = useState(\"\");\n  const [zip, setZip] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [creditCardNumber, setCreditCardNumber] = useState(\"\");\n  const [creditCardExp, setCreditCardExp] = useState(\"\");\n  const [creditValidationNumber, setCreditValidationNumber] = useState(\"\");\n  const [quantity, setQuantity] = useState(0);\n  const [success, setSuccess] = useState(false);\n  const [open, setOpen] = useState(false);\n  const [total, setTotal] = useState(0);\n  \n  const getTotal = async () => {\n    if(user){\n    const myProducts = await getCartByUser(user.id, token)\n      setMyProducts(myProducts);\n    }\n    console.log('from getTotal>>>>', myProducts)\n    if (myProducts) {\n      myProducts.map((element) => {\n        console.log('from get total>>>>', Number(element.price))\n        totalPrice =\n          Number(totalPrice) + (Number(element.price) * element.orderQuantity);\n        setTotal(totalPrice);\n      });\n      totalPrice = 0;\n    }\n  }\n\n  const getMyProducts = async () => {\n    try {\n      // const response = await fetch(\n      //   `http://localhost:3000/api/orders/cart/${userId}`\n      // );\n      // const data = await response.json();\n      const myProducts = await getCartByUser(user.id, token)\n      setMyProducts(myProducts);\n      console.log('>>>>>',myProducts)\n      \n    } catch (error) {\n      console.error(error);\n    }\n  \n  };\n  useEffect(() => {\n    getMyProducts();\n    getTotal()\n  }, []);\n\n  const handleUpdate = async (orderId) => {\n    console.log(\"changing quantity\", orderId)\n    await updateQuantity(orderId, quantity, token)\n    const myProducts = await getCartByUser(user.id, token)\n    setMyProducts(myProducts)\n    getTotal()\n    \n  }\n\n  const deleteCart = async () => {\n    if (userId) {\n      await destroyCart(userId, token);\n      const usersCart = await getCartByUser(userId, token);\n      setMyProducts(usersCart);\n    }\n\n    setTotal(0);\n  };\n\n  const submitOrder = async (event) => {\n    event.preventDefault();\n\n    \n    if (user.id) {\n      const checkout = await submitCheckout(\n        {\n          userId: user.id,\n          firstName,\n          lastName,\n          street,\n          city,\n          state,\n          zip,\n          phone,\n          creditCardNumber,\n          creditCardExp,\n          creditValidationNumber,\n          orders: cart,\n        },\n        token\n      );\n    }\n    const usersCart = await getCartByUser(user.id, token);\n    setMyProducts(usersCart);\n    deleteCart();\n    setSuccess(true);\n    setFirstName(\"\");\n    setLastName(\"\");\n    setStreet(\"\");\n    setCity(\"\");\n    setState(\"\");\n    setZip(\"\");\n    setPhone(\"\");\n    setCreditValidationNumber(\"\");\n    setCreditCardExp(\"\");\n    setCreditCardNumber(\"\");\n  };\n\n  function removeItem(orderId) {\n    myProducts.map((item) => {\n      if (orderId == item.orderId) {\n        totalPrice = totalPrice - item.price;\n      }\n      setTotal(totalPrice);\n      let newMyProducts = myProducts.filter((item) => item.orderId != orderId);\n\n      setMyProducts(newMyProducts);\n      getMyProducts();\n\n      getTotal();\n    });\n  }\n\n  return (\n    <>\n\n      {user ? <h1>Welcome to your cart {user.firstName}</h1> : <h1>Your cart is empty</h1>}\n\n      {myProducts ? (\n        myProducts.map((item) => (\n          <div id=\"all-products-container\" key={item.id}>\n            <h5>\n              {item.title}\n              {\"$\"}\n              {item.price * item.orderQuantity}\n              <button value={item.orderId} onClick={\n                  ((event) => \n                  handleUpdate(event.target.value))\n                }>Update</button>\n              <select\n                onChange={((event) => setQuantity(event.target.value))}\n              >\n                <option value={1}>1</option>\n                <option value={2}>2</option>\n                <option value={3}>3</option>\n                <option value={4}>4</option>\n                <option value={5}>5</option>\n                <option value={6}>6</option>\n                <option value={7}>7</option>\n                <option value={8}>8</option>\n                <option value={9}>9</option>\n                <option value={10}>10</option>\n              </select>\n              <button\n                value={item.orderId}\n                onClick={(event) => {\n                  event.preventDefault();\n                  removeItem(event.target.value);\n                }}\n              >\n                Remove selected item\n              </button>\n            </h5>\n          </div>\n        ))\n      ) : (\n        <div>Cart is Empty</div>\n      )}\n      <h5>\n        Total Cost: {\"$\"}\n        {total}\n      </h5>\n      <button>Edit Cart</button>\n      <button onClick={() => deleteCart()}>Delete Cart</button>\n\n      <form onSubmit={submitOrder}>\n        <h3 id=\"checkoutInstruction\">\n          Please Enter Your Shipping and Payment Information!\n        </h3>\n        <div id=\"creditCardSection\">\n          <input\n            className=\"input\"\n            type=\"text\"\n            placeholder=\"First\"\n            required\n            value={firstName}\n            onChange={(event) => setFirstName(event.target.value)}\n          ></input>\n\n          <input\n            className=\"input\"\n            type=\"text\"\n            placeholder=\"Last\"\n            required\n            value={lastName}\n            onChange={(event) => setLastName(event.target.value)}\n          ></input>\n        </div>\n        <div id=\"creditCardSection\">\n          <input\n            className=\"input\"\n            type=\"text\"\n            placeholder=\"Street\"\n            required\n            value={street}\n            onChange={(event) => setStreet(event.target.value)}\n          ></input>\n\n          <input\n            className=\"input\"\n            type=\"text\"\n            placeholder=\"City\"\n            required\n            value={city}\n            onChange={(event) => setCity(event.target.value)}\n          ></input>\n\n          <input\n            className=\"input\"\n            type=\"text\"\n            placeholder=\"State\"\n            required\n            value={state}\n            onChange={(event) => setState(event.target.value)}\n          ></input>\n\n          <input\n            className=\"input\"\n            type=\"text\"\n            placeholder=\"Zip\"\n            required\n            value={zip}\n            onChange={(event) => setZip(event.target.value)}\n          ></input>\n\n          <input\n            className=\"input\"\n            type=\"text\"\n            placeholder=\"Phone\"\n            required\n            value={phone}\n            onChange={(event) => setPhone(event.target.value)}\n          ></input>\n        </div>\n        <div id=\"creditCardSection\">\n          <input\n            className=\"input\"\n            type=\"text\"\n            placeholder=\"CC Number\"\n            required\n            value={creditCardNumber}\n            onChange={(event) => setCreditCardNumber(event.target.value)}\n          ></input>\n\n          <input\n            className=\"input\"\n            type=\"text\"\n            placeholder=\"Expiration\"\n            required\n            value={creditCardExp}\n            onChange={(event) => setCreditCardExp(event.target.value)}\n          ></input>\n\n          <input\n            className=\"input\"\n            type=\"text\"\n            placeholder=\"CVV# on Back\"\n            required\n            value={creditValidationNumber}\n            onChange={(event) => setCreditValidationNumber(event.target.value)}\n          ></input>\n        </div>\n        {success ? (\n          <div>Thank You for your purchase! Youre purchase is complete.</div>\n        ) : null}\n        <button\n          id=\"paymentSubmit\"\n          type=\"submit\"\n          variant=\"contained\"\n          className=\"button\"\n        >\n          Submit Order\n        </button>\n      </form>\n    </>\n  );\n};\n\nexport default MyCart;\n"]},"metadata":{},"sourceType":"module"}